# This is the base for all generated configurations for the parameter sweep for my ICRA 2022 paper.
# This is YAML instead of JSON (the output format of `manage.py generate`) because YAML is easier to
# read and lets me add comments.

# The parameter values should match what's in the Google Sheet:
# https://docs.google.com/spreadsheets/d/1qR8gwAg4WhCLUPF9Im4pzqhvJ9ET6Svqa_iohnrsBZo/edit

# -- FIXED PARAMETERS ----------------------------------------------------------

world_grid_width: 384
world_grid_height: 384

# config.json files generated from this will go in this directory
data_dir_base: 'test_out'

# Range of trial numbers to run (inclusive on both ends)
start_trial: 1
num_trials: 100
max_trial_duration: 50000
# Path is relative to directory where code is run (typically project root)
img_dir: "imgs"
# env_img_pattern: 'imgs/img_oct={octaves}_{trial:03d}.png'

max_speed: 2 # virtual speed

# PSO parameters (only in hybrid movement)
pso_step_interval: 25 # ticks
pso_inertia: 1.2
pso_self_weight: 0.025
pso_group_weight: 0.025

# Boids parameters (only in hybrid movement)
lj_a: 6 # Lennard-Jones potential
lj_b: 3 # Lennard-Jones potential
lj_epsilon: 1
lj_gamma: 1

# -- VARIED PARAMETERS ---------------------------------------------------------

# This determines what's varied within the experiments.
# There's some redundancy
vary_params:
- num_robots
- comm_range
- env_octaves
- end_condition
- end_condition_params/time/end_val
- end_condition_params/value/end_val
- movement_type
- movement_type_params/hybrid/gradient_weight
- movement_type_params/hybrid/rx_table_timeout
- movement_type_params/hybrid/post_decision_movement

num_robots: [8, 16, 32, 64]
comm_range: [4, 8, 16, 32]

env_octaves: [1,3,5]

end_condition: ['value', 'time']
end_condition_params:
  value:
    end_val: [0, 4, 16]
  time:
    end_val: [1000, 4000, 8000]

movement_type: ['hybrid', 'sweep']
# Not all movement types require additional parameters
# (This avoids running the sweep with these different parameters that aren't used)
movement_type_params:
  hybrid: # Add parameters for table timeout/variable communication range
    gradient_weight: 0, 8, 32
    rx_table_timeout: [128, 256, 512, 1024] # num. ticks after which old rx hop counts are purged
    post_decision_movement: ['hybrid', 'flock', 'disperse']